---
name: experience-retrieval
description: 检索开发经验和测试经验知识库，为用户查询提供支持。从经验文档库和规范文档中检索相关内容，提供核心要点和关键信息。使用此技能当：用户需要查询特定问题或场景的经验教训；需要从历史经验中找到类似问题的解决方案；需要检查是否某个问题之前已经遇到过并有解决方案；需要了解相关的开发或测试规范。
---

# Experience Retrieval

此技能负责从经验知识库中检索相关内容，为用户提供问题解决方案和规范指导。

## 触发时机（必须）

- **Subagent 开始**：若任务涉及核心工具/平台（Unity、构建、测试、依赖管理、文件系统等），先做一次轻量检索避免重复踩坑
- **遇到错误/回退**：出现编译、运行、工具参数校验、状态冲突、超时等问题时，立即检索再决定下一步
- **反复失败**：相同问题出现两次以上，必须检索并对照已有经验

## 核心工作流

### Step 1: 理解用户查询

#### 分析查询内容

- 用户遇到的问题类型
- 关键词和术语
- 上下文信息
- 期望的解决方案类型

#### 关键词提炼（重要）

- 优先保留：工具名、action、错误码/关键报错、平台版本
- 去除噪声：临时 ID、时间戳、随机路径、无关堆栈
- 如果是工具调用失败，至少包含「tool + action + error 关键词」

### Step 2: 判断查询类型

判断用户查询的是开发问题还是测试问题：
- **开发问题**：在 `context/experience/development/` 文件夹中搜索必要的相关文档
- **测试问题**：在 `context/experience/testing/` 文件夹中搜索必要的相关文档

### Step 3: 搜索经验文档

#### 搜索范围

- 文档标题
- 问题描述
- 触发条件
- 解决方案

#### 选择策略

- 优先匹配同工具/同 action/同错误码的经验
- 如果结果过多，缩小到最接近当前环境的版本或配置

#### ⚠️ 数量限制（重要）

- **最多读取不超过5个最相关的经验文档**
- 优先选择与当前任务最直接相关的文档
- 避免读取过多无关内容导致输出过长

### Step 4: 搜索规范文档

#### 搜索范围

- 规范文档标题
- 规范内容要点

#### 文件夹定位

- 开发问题：在 `context/standard/development/` 文件夹中搜索相关规范
- 测试问题：在 `context/standard/testing/` 文件夹中搜索相关规范
- 不要读取全部文档，仅读取当前任务最相关的文档

### Step 5: 总结输出

#### ⚠️ 内容限制（重要）

- **总结输出内容不超过100行**
- 保持简洁精炼，突出核心要点
- 提供关键信息和快速参考，避免冗长描述
- 提供文档摘要和路径供用户选择，包括经验文档和规范文档
- 若未找到相关经验，明确说明“未检索到匹配经验”，并给出下一步建议

## 文件夹结构

```
context/
├── experience/
│   ├── development/          # 开发经验
│   └── testing/             # 测试经验
└── standard/
    ├── development/         # 开发规范
    └── testing/             # 测试规范
```
