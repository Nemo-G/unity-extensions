---
name: experience-recording
description: 记录项目开发过程中的经验知识库，用于记录任务执行过程中遇到的问题、解决方案和最佳实践。经验分为开发经验和测试经验两类，分别存储在不同目录。使用此技能当：需要回顾和总结任务执行过程中遇到的问题；需要记录任务未一次完成的情况和解决方案；需要将问题解决经验文档化并保存到知识库；complete_task 前必须要做经验盘点。
---

# Experience Recording

此技能负责记录项目开发过程中的经验知识库。经验分为**开发经验**和**测试经验**两类：
- **开发经验**：记录游戏开发过程中的问题、解决方案和最佳实践
- **测试经验**：记录测试相关的问题、解决方案和最佳实践

该技能能够回顾和反思任务执行过程中出现的问题，记录未一次完成的任务、遇到的问题及最终解决方案，并在对应目录内创建规范的经验文档。

## 触发时机（必须）

- **complete_task前**：complete_task 前必须进行一次经验盘点
- **主动激活**：检查当前 context 进行盘点

## 核心原则

**通用性原则**：
- **非常重要** 若无新增经验，明确说明“不新增经验”，不要强行建文档
- ❌ 避免游戏特定术语（如"无尽跑酷"、"Player"、"Enemy"等）
- ✅ 使用通用技术术语（如"角色"、"碰撞体"、"物理组件"等）
- ✅ 经验应适用于各种游戏，不限于某个特定游戏

**简洁性原则**：
- 描述简洁明了，避免冗余
- 代码示例只保留关键部分
- 避免重复说明相同内容

## 工作流程

### Step 0: 收集候选问题（执行中）

- 记录每次失败/回退的关键信息：工具/动作、关键参数、错误原文、修复方式、验证方法
- 同类问题重复出现时合并为一条记录

### Step 1: 收尾盘点（每个 subagent 必做）

#### 需要记录的情况
- 任务未一次完成（需要多次尝试）
- 遇到编译错误、运行时错误
- 遇到工具使用问题（Unity、Git、Shell等）
- 遇到工具参数校验失败、状态冲突、Play Mode 写入限制、编译/构建超时
- 遇到配置问题（环境、依赖、设置等）
- 遇到API或库使用问题
- 遇到文档不清晰或缺失导致的问题
- 发现了新的解决方案或最佳实践

#### 不需要记录的情况
- 任务一次成功完成，无任何问题
- 重复记录相同问题（已有文档）
- 仅是常规操作，无特殊问题

### Step 2: 任务类型判断

判断当前任务是开发任务还是测试任务：
- **开发任务**：游戏逻辑开发、场景搭建、资源创建、性能优化等
- **测试任务**：测试代码编写、测试配置、测试框架使用、测试运行等

### Step 3: 去重检查

检查对应经验库中是否已有类似经验，优先使用 `experience-retrieval` 技能检索。如果存在则分析哪个更正确，经验库中相同经验只保留一份最正确的版本。

### Step 4: 创建经验文档

#### 文档路径
`context/experience/{类别}/{YYYYMMDD}_{问题简述}.md`
- 开发经验：`context/experience/development/`
- 测试经验：`context/experience/testing/`

#### 命名示例
- `20260115_Unity编译错误MissingReferenceException.md`
- `20260115_Git提交失败PermissionDenied.md`
- `20260129_Unity Player插入到地面以下.md`

#### 文档格式要求
- 使用标准模板：`assets/templates/开发经验文档模板.md`或`assets/templates/测试经验文档模板.md`
- 文档必须覆盖：问题描述、触发条件、解决方案、验证方式、经验总结（如模板缺少标题，在文档末尾补齐简短小节）
- 工具轨迹类问题必须补充：Tool 名称/Action、关键参数、原始错误、正确调用/修复要点
- 使用 `read_file` 读取模板文件，按照模板结构填写内容

### Step 5: 内容简洁性要求

- 只记录核心内容：问题描述、解决方案、验证方式、经验总结
- 代码示例精简，避免重复描述
- 删除冗余章节（如"尝试过的无效方案"、"知识扩展"）
- 直接描述问题和解决方案，不展开详细理论

**核心原则**：
- ✅ **描述问题**：文件名应清晰描述**出现了什么问题**，而不是解决方案或机制
- ✅ **单一具体**：一个文档只记录一个具体问题，包含技术术语
- ✅ **便于检索**：包含关键词，方便遇到类似问题时搜索
- ✅ **避免重复记录**：经验库中相同经验只保留一份最正确的版本
- ❌ **避免宽泛**：不要使用"最佳实践"、"经验总结"、"常见问题"、"管理"等词汇
- ❌ **避免描述解决方案**：不要使用"机制"、"方案"、"方法"、"技巧"等词
- ❌ **禁止任务总结**：不要创建任务总结类型的文档（如"XXX游戏开发任务总结.md"），只记录遇到的问题和解决方案
- ❌ **禁止游戏特定内容**：规范文档中不允许添加特定游戏类型或特定游戏相关的内容，必须是通用的规范

**示例**：
- ✅ `20260117_Unity游戏未自动切换到Playing状态.md` - 清晰描述问题
- ✅ `20260117_Unity UGUI遮挡Camera问题.md` - 包含技术术语
- ✅ `20260121_Unity测试程序集NUnit编译错误.md` - 测试相关
- ❌ `20260117_Unity游戏状态自动启动机制.md` - 描述的是解决方案，不是问题
- ❌ `20260117_Unity编辑器脚本常见编译错误.md` - 太宽泛
- ❌ `20260118_EndlessRunner3D游戏开发任务总结.md` - 任务总结，不应该创建

**重要说明**：
- 经验文档库只记录**遇到的问题和解决方案**，不记录任务总结、项目总结等文档
- 如果任务顺利完成没有遇到问题，不需要创建经验文档
- 只有当任务执行过程中遇到具体问题需要解决时，才记录经验

## 文档模板

使用标准经验文档模板：
- 开发经验模板：`assets/templates/开发经验文档模板.md`
- 测试经验模板：`assets/templates/测试经验文档模板.md`

## 文件夹结构

```
context/
└── experience/
    ├── development/          # 开发经验
    │   ├── 20260115_Unity编译错误MissingReferenceException.md
    │   └── 20260115_Git提交失败PermissionDenied.md
    └── testing/             # 测试经验
        └── 20260121_Unity测试程序集NUnit编译错误.md
```

## 维护建议

1. **定期整理**：定期检查和更新经验文档
2. **版本控制**：使用 Git 跟踪文档变化
3. **去重合并**：合并相似的经验文档，经验库中相同经验只保留一份最正确的版本
4. **冲突处理**：当新总结的经验与经验库已有经验出现不一致时，仔细分析哪个是正确的，只保留最正确的版本
5. **分类管理**：严格按照开发和测试分类存储经验文档
6. **内容精简**：定期审查经验文档，删除冗余内容，确保文档简洁明了

## 文档命名规范

1. **文件名格式**：`YYYYMMDD_问题描述.md`
   - 文件名必须是对问题的简述，不是解决方案或设计方法
   - 避免使用"解决方案"、"设计方案"、"配置方法"等词汇
   - 示例：`20260129_Unity Player插入到地面以下.md` ✅
   - 示例：`20260129_Unity Player碰撞体配置精确计算方法.md` ❌

2. **文档内容格式**：
   - 只记录"发现问题→解决问题"的经验
   - 不记录设计方案、最佳实践等非问题解决类内容
   - 每个文档只包含一个具体问题和解决方案

3. **检索友好性**：
   - 文件名要便于AI检索，使用问题关键词
   - 避免模糊、通用的文件名
   - 示例：`20260129_Unity输入系统按键无响应.md` ✅
   - 示例：`20260129_Unity游戏开发经验.md` ❌
